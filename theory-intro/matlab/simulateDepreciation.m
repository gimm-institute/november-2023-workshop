%% Exchange rate depreciation

close all
clear

load mat/createModel.mat m

m20 = m;
m20.ss_sigma_hh = 0.20;
m20.c0_prem_gap = 0.85;
m20 = steady(m20);
m20 = solve(m20);

m80 = m;
m80.ss_sigma_hh = 0.60;
m80.c0_prem_gap = 0.85;
m80 = steady(m80);
m80 = solve(m80);

d = steadydb(m, 1:40);
d.shock_prem_gap(1) = 0.15;

s = simulate( ...
    m, d, 1:40 ...
    , "prependInput", true ...
    , "method", "stacked" ...
);

d20 = steadydb(m20, 1:40);
d20.shock_prem_gap(1) = 0.15;

s20 = simulate( ...
    m20, d20, 1:40 ...
    , "prependInput", true ...
    , "method", "stacked" ...
);

d80 = steadydb(m80, 1:40);
d80.shock_prem_gap(1) = 0.15;

s80 = simulate( ...
    m80, d80, 1:40 ...
    , "prependInput", true ...
    , "method", "stacked" ...
);

%%

ch = Chartpack();
ch.Range = 0:20;

ch + [ 
    "Nominal exchange rate: e", ...
    "Output gap: 100*(y_gap-1)", ...
    ..."Gross loans: l", ...
    "Portfolio default rate: 100*q_hh", ...
    "Performing loans: lp", ...
    "Nonperforming loans: ln" ...
    "CAR: 100*car" ...
    "Stock lending rates: 400*rl_hh" ...
    "New lending rates: 400*new_rl_hh" ...
    "Policy rate: 400*r" ...
];

draw(ch, databank.merge("horzcat", s, s20, s80));


